(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[48],{589:function(e,t,a){},762:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),l=c(r),o=c(a(573)),i=c(a(68));function c(e){return e&&e.__esModule?e:{default:e}}o.default.string,o.default.bool,o.default.oneOfType([o.default.bool,o.default.string,o.default.oneOf(["","alt"])]),o.default.oneOf(["","lg","sm"]),o.default.bool,o.default.bool,o.default.any,o.default.string,o.default.bool,o.default.any,o.default.string,o.default.bool,o.default.func,o.default.oneOf(["checkbox","radio"]),o.default.oneOf(["","3d","pill"]),o.default.string,o.default.string,o.default.string;var s={color:"secondary",label:!1,outline:!1,size:"",checked:!1,defaultChecked:void 0,disabled:void 0,required:void 0,type:"checkbox",variant:"",dataOn:"On",dataOff:"Off"},d=function(e){function t(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,a));return n.handleChange=n.handleChange.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.state={uncontrolled:!!n.props.defaultChecked,checked:n.props.defaultChecked||n.props.checked,selected:[]},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toggleState=function(e){this.setState({checked:e})},t.prototype.handleChange=function(e){var t=e.target;this.toggleState(t.checked),this.props.onChange&&this.props.onChange(e)},t.prototype.handleKeyDown=function(e){" "===e.key&&e.preventDefault()},t.prototype.handleKeyUp=function(e){"Enter"!==e.key&&" "!==e.key||this.toggleState(!this.state.checked)},t.prototype.componentDidUpdate=function(e,t){this.state.uncontrolled||this.props.checked===t.checked||this.toggleState(this.props.checked)},t.prototype.render=function(){var e=this.props,t=e.className,a=e.disabled,r=e.color,o=e.name,c=e.label,s=e.outline,d=e.size,u=e.required,m=e.type,p=e.value,f=e.dataOn,h=e.dataOff,b=e.variant,g=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["className","disabled","color","name","label","outline","size","required","type","value","dataOn","dataOff","variant"]),E=g.tabIndex;delete g.tabIndex,delete g.checked,delete g.defaultChecked,delete g.onChange;var y=(0,i.default)(t,"switch",!!c&&"switch-label",!!d&&"switch-"+d,!!b&&"switch-"+b,"switch"+(s?"-outline":"")+"-"+r+("alt"===s?"-alt":""),"form-check-label"),v=(0,i.default)("switch-input","form-check-input"),C=(0,i.default)("switch-slider");return l.default.createElement("label",{className:y,tabIndex:E,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown},l.default.createElement("input",n({type:m,className:v,onChange:this.handleChange,checked:this.state.checked,name:o,required:u,disabled:a,value:p,"aria-checked":this.state.checked,"aria-disabled":a,"aria-readonly":a},g)),l.default.createElement("span",{className:C,"data-checked":f,"data-unchecked":h}))},t}(r.Component);d.propTypes={},d.defaultProps=s,t.default=d,e.exports=t.default},956:function(e,t,a){"use strict";a.r(t);var n=a(176),r=a(53),l=a(168),o=a(169),i=a(171),c=a(170),s=a(173),d=a(172),u=a(1),m=a.n(u),p=(a(589),a(587)),f=a(902),h=a(768),b=a(848),g=a(849),E=a(831),y=a(832),v=a(570),C=a(619),S=a(850),w=a(92),k=(a(602),a(70)),O=a(69),N=a.n(O);a(762);w.b.configure();var D=function(e){e.buttonLabelView;var t,a=e.className,n=(e.errorInput,e.currentUser,Object(u.useState)(!1)),r=Object(p.a)(n,2),l=r[0],o=r[1];function i(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("currentUser")),a=(null===t||void 0===t||t.role,document.querySelector("#channelData")),n=new FormData(a),r=n.get("name"),l=n.get("channel"),o=n.get("description");(new XMLHttpRequest).onreadystatechange=function(){4===this.readyState&200===this.status&&alert("Uploaded!")};var i="* Name field may be empty";if(""==r&&null===l&&""==o)w.b.error(i),w.b.error("* Channel field may be empty"),w.b.error("* Description field may be empty");else if(""==r&&null===l)w.b.error(i),w.b.error("* Channel field may be empty");else if(null===l&&""==o)w.b.error("* Channel field may be empty"),w.b.error("* Description field may be empty");else if(""==r&&""==o)w.b.error(i),w.b.error("* Description field may be empty");else if(null===l)w.b.error("* Description field may be empty");else if(""==o)w.b.error(i);else{(new FormData).append("channelForm",'{"name": "'+r+'","channel": " '+l+'", "description": " '+o+'"} ');N.a.post(k[k.REACT_APP_ENVIRONMENT].API_CREATE_CAMPAIGN,{active:!1,channelId:l,description:o,isActive:!1,label:r},{headers:{ContentType:"application/json",Authorization:t.token}}).then((function(e){w.b.success("Added Campaign Successfully"),setTimeout((function(){window.location.reload()}),1e3)})).catch((function(e){e.response?w.b.error("Error Adding Campaign **"):e.request?w.b.error("Error Adding Campaign ***"):w.b.error("Error Adding Campaign ****")}))}}var c=function(){return o(!l)};return m.a.createElement("div",{className:"container"},m.a.createElement("button",{className:"btn btn-lg icon-plus",onClick:c,style:{backgroundColor:"#E60000",color:"#fff",borderRadius:10,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,float:"right"},role:"button"},m.a.createElement("a",{style:{fontFamily:"Roboto"}}," Create Campaign ")),m.a.createElement("br",null),m.a.createElement(f.a,{isOpen:l,size:"lg",toggle:c,className:a},m.a.createElement(h.a,{id:"channelData",onSubmit:i},m.a.createElement(b.a,{toggle:c},m.a.createElement("a",{style:{fontFamily:"Roboto"}}," ",m.a.createElement("h4",null,"Create Campaign "))),m.a.createElement(g.a,null,m.a.createElement(w.a,{closeButton:!1,style:{color:"#fff"}}),m.a.createElement("br",null),m.a.createElement("div",{className:"container"},m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"name",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*"),"Name:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0},style:{paddingLeft:"15px"}},m.a.createElement(C.a,{type:"text",name:"name",id:"name",placeholder:"Please provide name",required:!0}))),m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"channel",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*"),"Channel:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0}},m.a.createElement(C.a,{type:"select",name:"channel",id:"channel",required:!0},null===e||void 0===e?void 0:null===(t=e.channelData)||void 0===t?void 0:t.map((function(e,t){return m.a.createElement("option",{key:t,value:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.label)}))))),m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"description",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*"),"Description:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0}},m.a.createElement(C.a,{type:"textarea",name:"description",id:"description",placeholder:"Please provide description details",required:!0}))))),m.a.createElement(S.a,null,m.a.createElement("div",{className:"btn-group"},m.a.createElement("a",{style:{paddingRight:"5px"}},m.a.createElement("button",{className:"btn btn-lg",onClick:c,style:{backgroundColor:"#000",color:"#fff",borderColor:"green",borderRadius:10,paddingLeft:5,paddingRight:5,paddingTop:0,paddingBottom:0,textTransform:"unset"}},"Cancel")," "),m.a.createElement("button",{type:"submit",onClick:i,className:"btn btn-lg",style:{backgroundColor:"#E60000",color:"#fff",borderColor:"green",borderRadius:10,paddingLeft:5,paddingRight:5,paddingTop:0,paddingBottom:0,textTransform:"unset"}},"Confirm"))))))},A=a(580),T=(a(583),function(e){var t={columns:[{label:"#",field:"id",sort:"disabled",width:1},{label:"Label",field:"label",sort:"dsc",width:40},{label:"Description",field:"description",sort:"asc",width:"40"},{label:"Created On",field:"createdOn",sort:"asc",width:40},{label:"Status",field:"status",sort:"disabled",width:"5px",height:5},{label:"",field:"action",sort:"disabled",width:50,height:5}],rows:e.posts};return m.a.createElement(A.e,null,m.a.createElement(A.f,{id:"idforSubscription",small:!0,theadColor:"white",responsiveXl:!0,responsiveSm:!0,btn:!0,striped:!0,data:t,sortable:!0,bordered:!0,noBottomColumns:!0}))});w.b.configure();var I=function(e){e.buttonLabelView;var t,a=e.className,n=Object(u.useState)(!1),r=Object(p.a)(n,2),l=r[0],o=r[1],i=function(){return o(!l)};return m.a.createElement("div",null,m.a.createElement("a",{className:"link",onClick:i,style:{color:"blue",fontFamily:"san-serif"}},"Edit"),m.a.createElement(f.a,{isOpen:l,toggle:i,className:a,size:"lg"},m.a.createElement(h.a,{id:"campaignlData"},m.a.createElement(b.a,{style:{fontSize:"1em",fontWeigth:"bolder"}},"Edit Campaign "),m.a.createElement(g.a,null,m.a.createElement("br",null),m.a.createElement("div",{className:"container"},m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"name",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*")," Name:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0},style:{paddingLeft:"15px"}},m.a.createElement(C.a,{type:"text",name:"name",id:"name",defaultValue:e.selectedSubscriptionName}))),m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"channel",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*"),"Channel:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0}},m.a.createElement(C.a,{type:"select",name:"channel",id:"channel",required:!0},m.a.createElement("option",null,null===e||void 0===e?void 0:e.selectedChannelName),null===e||void 0===e?void 0:null===(t=e.channelData)||void 0===t?void 0:t.map((function(e,t){return m.a.createElement("option",{key:t,value:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.label)}))))),m.a.createElement(E.a,{row:!0},m.a.createElement(y.a,{htmlFor:"description",sm:"12",md:{size:2,offset:1},style:{color:"#E60000"}},m.a.createElement("a",{style:{color:"black"}},"*"),"Description:"),m.a.createElement(v.a,{sm:"12",md:{size:8,offset:0}},m.a.createElement(C.a,{type:"textarea",name:"description",id:"description",defaultValue:e.selectedDescription}))))),m.a.createElement(S.a,null,m.a.createElement("div",{className:"btn-group"},m.a.createElement("a",{style:{paddingRight:"5px"}},m.a.createElement("button",{className:"btn btn-lg",onClick:function(e){e.preventDefault(),o(!1)},style:{backgroundColor:"#000",color:"#fff",borderColor:"green",borderRadius:10,paddingLeft:5,paddingRight:5,paddingTop:0,paddingBottom:0,textTransform:"unset"}},"Cancel")),m.a.createElement("button",{className:"btn btn-lg",onClick:function(t){t.preventDefault();var a=JSON.parse(localStorage.getItem("currentUser")),n=(null===a||void 0===a||a.role,document.querySelector("#campaignlData")),r=new FormData(n),l=r.get("name"),o=r.get("channel"),i=r.get("description");(new XMLHttpRequest).onreadystatechange=function(){4===this.readyState&200===this.status&&alert("Uploaded!")};var c="* Name field may be empty";if(""==l&&null===o&&""==i)w.b.error(c),w.b.error("* Channel field may be empty"),w.b.error("* Description field may be empty");else if(""==l&&null===o)w.b.error(c),w.b.error("* Channel field may be empty");else if(null===o&&""==i)w.b.error("* Channel field may be empty"),w.b.error("* Description field may be empty");else if(""==l&&""==i)w.b.error(c),w.b.error("* Description field may be empty");else if(null===o)w.b.error("* Description field may be empty");else if(""==i)w.b.error(c);else{(new FormData).append("channelForm",'{"name": "'+l+'","channel": " '+o+'", "description": " '+i+'"} ');var s=new Date;N.a.put(k[k.REACT_APP_ENVIRONMENT].API_UPDATE_CAMPAIGN,{active:!0,id:e.selectedSubscriptionId,updatedOn:s,description:i,label:l,channel:o},{headers:{ContentType:"application/json",Authorization:a.token}}).then((function(e){w.b.success("Campaign Edited Successfully"),setTimeout((function(){window.location.reload()}),1e3)})).catch((function(e){e.response?w.b.error("Error Editing Campaign **"):e.request?w.b.error("Error Editing Campaign ***"):Object(w.b)("Error Editing Campaign ****")}))}},type:"submit",style:{backgroundColor:"#E60000",color:"#fff",borderColor:"green",borderRadius:10,paddingLeft:5,paddingRight:5,paddingTop:0,paddingBottom:0,textTransform:"unset"}},"Submit"))))))},j=function(e){var t=e.switchStatusList,a=void 0===t?{}:t,l=(e.switchStatus,e.currentUser,Object(u.useState)(!1)),o=Object(p.a)(l,2),i=(o[0],o[1]);function c(e,t,a){var l=JSON.parse(localStorage.getItem("currentUser")),o=(null===l||void 0===l||l.role,t.target.checked);N.a.post(k[k.REACT_APP_ENVIRONMENT].API_CHANGE_CAMPAIGN_STATUS+e+"/"+o,{id:e,status:o},{headers:{ContentType:"application/json",Authorization:l.token}}).then((function(e){0==e.data.errCode?w.b.success("Changed Campaign Status Successfully"):w.b.error(e.data.errMsg)})).catch((function(e){e.response?w.b.error("Error Changing Campaign Status **"):e.request?w.b.error("Error Changing Campaign Status***"):w.b.error("Error Changing Campaign Status ****")})),null!=a&&""!=a&&"undefined"!=a||(a=!1),1==a?i((function(t){return Object(r.a)({},t,{switchStatusList:Object(r.a)({},t.switchStatusList,Object(n.a)({},e,!1))})})):0==a&&i((function(t){return Object(r.a)({},t,{switchStatusList:Object(r.a)({},t.switchStatusList,Object(n.a)({},e,!0))})}))}return m.a.createElement("div",null,e.selectedcampaignStatus?m.a.createElement("div",{className:"custom-control custom-switch"},m.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches-".concat(null===e||void 0===e?void 0:e.selectedcampaignId),defaultChecked:null===e||void 0===e?void 0:e.selectedcampaignStatus,checked:a[null===e||void 0===e?void 0:e.selectedcampaignId],onClick:function(t){return c(null===e||void 0===e?void 0:e.selectedcampaignId,t,null===e||void 0===e?void 0:e.selectedcampaignStatus)}}),m.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitches-".concat(null===e||void 0===e?void 0:e.selectedcampaignId)})):[],!1===(null===e||void 0===e?void 0:e.selectedcampaignStatus)?m.a.createElement("div",{className:"custom-control custom-switch"},m.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches-".concat(null===e||void 0===e?void 0:e.selectedcampaignId),onClick:function(t){return c(null===e||void 0===e?void 0:e.selectedcampaignId,t,null===e||void 0===e?void 0:e.selectedcampaignStatus)}}),m.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitches-".concat(null===e||void 0===e?void 0:e.selectedcampaignId)})):[])},_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).statusClick=function(e,t,l){var o=JSON.parse(localStorage.getItem("currentUser"));a.setState({currentUser:o});null===o||void 0===o||o.role;var i=t.target.checked;N.a.post(k[k.REACT_APP_ENVIRONMENT].API_CHANGE_CAMPAIGN_STATUS+e+"/"+i,{id:e,status:i},{headers:{ContentType:"application/json",Authorization:o.token}}).then((function(e){0==e.data.errCode?w.b.success("Changed Campaign Status Successfully"):w.b.error(e.data.errMsg)})).catch((function(e){e.response?w.b.error("Error Changing Campaign Status **"):e.request?w.b.error("Error Changing Campaign Status***"):w.b.error("Error Changing Campaign Status ****")})),null!=l&&""!=l&&"undefined"!=l||(l=!1),1==l?a.setState((function(t){return Object(r.a)({},t,{switchStatusList:Object(r.a)({},t.switchStatusList,Object(n.a)({},e,!1))})})):0==l&&a.setState((function(t){return Object(r.a)({},t,{switchStatusList:Object(r.a)({},t.switchStatusList,Object(n.a)({},e,!0))})}))},a.state={data:[],channelData:[],currentUser:"",selectedSubscriptionId:"",loading:!1,switchStatus:"",switchStatusList:{}},a.statusClick=a.statusClick.bind(Object(s.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("currentUser"));this.setState({currentUser:t});null===t||void 0===t||t.role;var a=this;this.setState({loading:!0},(function(){N.a.get(k[k.REACT_APP_ENVIRONMENT].API_GET_CHANNEL,{headers:{ContentType:"application/json",Authorization:t.token}}).then((function(t){var a,n=null===t||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.channels;e.setState({channelData:n})})),N.a.get(k[k.REACT_APP_ENVIRONMENT].API_GET_CAMPAIGN,{headers:{ContentType:"application/json",Authorization:t.token}}).then((function(e){var t=e.data.errCode,n=e.data.campaigns||[];a.setState((function(e){return{postCampaignsData:n,currentUserErrorCode:t}}));var r=a.state.postCampaignsData.length?a.state.postCampaignsData.map((function(e,t){var a,r=new Date(e.createdOn),l=new Date(e.updatedOn);e.active;return{id:t+1,label:e.label,description:e.description,createdOn:r.toString().substring(0,28),updatedOn:l.toString().substring(0,28),status:m.a.createElement(u.Fragment,null,m.a.createElement(j,{selectedcampaignId:e.id,selectedcampaignStatus:e.active})),action:m.a.createElement(u.Fragment,null,m.a.createElement(I,{channelData:n,selectedSubscriptionId:e.id,selectedSubscriptionName:e.label,selectedChannelName:null===e||void 0===e?void 0:null===(a=e.channel)||void 0===a?void 0:a.label,selectedDescription:e.description,campaignDataToGetChannelData:e}))}})):[];a.setState((function(e){return{data:r,currentUserErrorCode:t}}))}))}))}},{key:"render",value:function(){var e;return"2"==(null===(e=this.state)||void 0===e?void 0:e.currentUserErrorCode)&&(window.location.href="/login",localStorage.removeItem("currentUser")),m.a.createElement("div",{style:{backgroundColor:"#fff",height:"1200px"}},m.a.createElement(D,{channelData:this.state.channelData}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement(T,{posts:this.state.data}))}}]),t}(u.Component);t.default=_}}]);
//# sourceMappingURL=48.c7b34b5a.chunk.js.map